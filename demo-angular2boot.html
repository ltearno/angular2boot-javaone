<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="author" content="Arnaud Tournier - LTE Consulting"><title>Angular 2 Boot</title><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport"><link href="reveal.js/css/reveal.css" rel="stylesheet"><link rel="stylesheet" href="reveal.js/css/theme/moon.css" id="theme"><link href="reveal.js/lib/css/zenburn.css" rel="stylesheet"><script>document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );</script></head><body><div class="reveal"><div class="slides"><section><h1>Angular 2 Boot</h1><p><small>Arnaud Tournier - LTE Consulting</small></p></section><section id="_arnaud_tournier"><h2>Arnaud Tournier</h2><div class="paragraph"><p><strong>LTE Consulting</strong> founder.</p></div>
<div class="paragraph"><p>Speaker <strong>Devoxx France</strong>, <strong>JUGs</strong>, <strong>GWT.create</strong>, <strong>GWTCon</strong>, etc&#8230;&#8203;</p></div>
<div class="paragraph"><p>Training : Java, Typescript, GWT, Angular 2, GIT, &#8230;&#8203;</p></div>
<div class="paragraph"><p>Email : <a href="mailto:ltearno@gmail.com">ltearno@gmail.com</a></p></div>
<div class="paragraph"><p>Twitter : <a href="https://twitter.com/ltearno">@ltearno</a></p></div>
<div class="paragraph"><p>Web : <a href="http://www.lteconsulting.fr">www.lteconsulting.fr</a></p></div>
<div class="paragraph"><p>Full stack (x86_64 to JavaScript)</p></div></section>
<section id="_this_presentation_is_online"><h2>This presentation is online !</h2><div class="paragraph"><p><a href="http://lteconsulting.fr/angular2boot-javaone/">lteconsulting.fr/angular2boot-javaone</a></p></div>
<div class="paragraph"><p>Demo code available at</p></div>
<div class="ulist"><ul><li><p><a href="https://github.com/ltearno/tour-of-heroes">github.com/ltearno/tour-of-heroes</a></p></li><li><p><a href="https://github.com/ltearno/angular2boot-demos">github.com/ltearno/angular2boot-demos</a></p></li></ul></div></section>
<section id="_angular_2_boot"><h2>Angular 2 Boot ?</h2><div class="paragraph"><p>A new RIA paradigm for Java : programming Angular 2 with Java 8.</p></div>
<div class="paragraph"><p>The coolest Java 8 RIA framework in the place ;)</p></div>
<div class="paragraph"><p><a href="http://lteconsulting.fr/angular2boot/">lteconsulting.fr/angular2boot/</a></p></div></section>
<section id="_a_more_technical_title"><h2>A more technical title</h2><div class="paragraph"><p>Integrating Angular 2 and GWT 2.8, problems and solutions&#8230;&#8203;</p></div></section>
<section id="_why"><h2>Why ?</h2><div class="paragraph"><p>Angular 2 natively supports Typescript, Javascript and Dart but <strong>Java</strong> has all the required features.</p></div>
<div class="imageblock" style=""><div class="content"><img src="images/angular-languages.png" alt="angular languages"></div></div>
<div class="paragraph"><p>Why is not Java in the party ? Let&#8217;s remedy !</p></div></section>
<section id="_how"><h2>How ?</h2><div class="paragraph"><p>So it all started as an experiment&#8230;&#8203;</p></div>
<div class="paragraph"><p>But since it rocks, I wanted to show it to the world !</p></div>
<aside class="notes"><div class="paragraph"><p>Qui ici (a) fait du GWT ? En refera ?</p></div>
<div class="paragraph"><p>Qui a un backend Java et front en JS ?</p></div>
<div class="paragraph"><p>Java permet de maitriser la complexité d&#8217;une grosse base de code (donc plutot grosses applications). Taille moyenne des applications GWT : au moins 100000 loc.</p></div></aside></section>
<section><section id="_the_receipe" data-background="images/ingredients.jpg"><h2>The receipe</h2></section><section id="_angular_2"><h2>Angular 2</h2><div class="ulist"><ul><li><p>non invasive,</p></li><li><p>performances,</p></li><li><p>modern architecture, simple and efficient.</p></li></ul></div></section><section id="_gwt_2_8"><h2>GWT 2.8</h2><div class="ulist"><ul><li><p><strong>Java 8</strong> (strong typing, lambdas, streams, &#8230;&#8203;)</p></li><li><p><strong>JsInterop</strong> (easy integration with JS)</p></li><li><p><strong>SuperDevMode</strong> (compile on reload)</p></li><li><p>Optimized compilation (generated js size, performances)</p></li></ul></div></section><section id="_jsr_269"><h2>JSR 269</h2><div class="ulist"><ul><li><p>Annotation Processing API</p></li><li><p>Code generation during compilation</p></li></ul></div></section><section id="_spring_boot"><h2>Spring Boot</h2><div class="ulist"><ul><li><p>Standalone server application,</p></li><li><p>Easy to start with,</p></li><li><p>Rich API (Spring),</p></li><li><p><em>Angular2Gwt works with <strong>any</strong> backend</em>.</p></li></ul></div></section></section>
<section id="_presentation_structure"><h2>Presentation structure</h2><div class="ulist"><ul><li><p>Angular 2,</p></li><li><p>GWT,</p></li><li><p>Angular2Boot,</p></li><li><p>Demonstration,</p></li><li><p>Challenges,</p></li><li><p>Roadmap,</p></li><li><p>Q&amp;A</p></li></ul></div></section>
<section><section id="_angular_2_2"><h2>Angular 2</h2><div class="paragraph"><p>Angular 1 was released in 2009.</p></div></section><section id="_at_that_time_there_was_not_a_lot_of_javascript_ria_frameworks"><h2>At that time, there was not a lot of Javascript RIA frameworks.</h2></section><section id="_angular_brings_the_strong_data_binding_strong_to_the_browser"><h2>Angular brings the <strong>Data binding</strong> to the browser.</h2></section><section id="_and_you_suddendly_were_able_to_write_a_todo_list_application_in_few_lines_of_code"><h2>And you suddendly were able to write a todo list application in few lines of code !</h2></section><section id="_enormous_success"><h2>Enormous success !</h2><div class="imageblock" style=""><div class="content"><img src="images/angular-success.png" alt="angular success"></div></div></section><section id="_millions_of_applications_were_built_with_angular"><h2>Millions of applications were built with Angular.</h2></section><section id="_when_it_came_to_evolve_the_framework_the_team_decided_to_build_upon_the_enormous_return_of_experience_they_had"><h2>When it came to evolve the framework, the team decided to build upon the (enormous) return of experience they had&#8230;&#8203;</h2></section><section id="_and_they_decided_to_write_angular_2_from_scratch"><h2>And they decided to write Angular 2 from scratch.</h2></section><section id="_why_what_were_the_problems"><h2>Why ? What were the problems ?</h2></section><section id="_architectural_problems"><h2>Architectural problems&#8230;&#8203;</h2><div class="ulist"><ul><li><p>Dynamic scoping,</p></li><li><p>Slow dirty checking,</p></li><li><p>Insane amount of directives to learn,</p></li><li><p>Difficult debugging&#8230;&#8203;</p></li></ul></div></section></section>
<section><section id="_angular_2_fundamentals"><h2>Angular 2 fundamentals</h2><div class="ulist"><ul><li><p>Modules,</p></li><li><p>Components,</p></li><li><p>Dependency Injection,</p></li><li><p>Change detection.</p></li></ul></div></section><section id="_modules"><h2>Modules</h2><div class="paragraph"><p>Parts of the application are encapsulated into <em>modules</em>.</p></div>
<div class="paragraph"><p>Leans to clean code and advanced AOT.</p></div></section><section id="_components"><h2>Components</h2><div class="paragraph"><p>Basic blocks of your application.</p></div>
<div class="paragraph"><p>Contains :</p></div>
<div class="ulist"><ul><li><p><em>view</em> (template),</p></li><li><p><em>model</em> (data and methods).</p></li></ul></div>
<div class="paragraph"><p>Interaction between view and model through <em>data binding</em>.</p></div></section><section id="_components_2"><h2>Components</h2><div class="paragraph"><p>Each component is responsible for a part of the DOM tree.</p></div>
<div class="paragraph"><p>Components form a tree.</p></div>
<div class="paragraph"><p>Components can interacts with each other (inputs, outputs&#8230;&#8203;).</p></div></section><section id="_example"><h2>Example</h2><div class="paragraph"><p>IMAGE DE L&#8217;ARBRE DE COMPOSANTS</p></div></section><section id="_dependency_injection"><h2>Dependency Injection</h2><div class="paragraph"><p>Sharing services between components.</p></div>
<div class="paragraph"><p>Lifecycle and dependencies are managed by Angular.</p></div>
<div class="paragraph"><p>Each component has a Dependency Injector. Those also form a tree.</p></div></section><section id="_change_detection"><h2>Change detection</h2><div class="paragraph"><p>Angular uses Zone.js to track changes.</p></div>
<div class="paragraph"><p>Zones are the <em>asynchronous TLS</em>.</p></div>
<div class="paragraph"><p>They preserve an execution context accross asynchronous calls.</p></div>
<div class="paragraph"><p>(done by patching most of the browsers async functions)</p></div></section><section id="_facile_à_essayer"><h2>Facile à essayer</h2><div class="listingblock"><div class="content"><pre class="highlight"><code>mvn archetype:generate \
  -DarchetypeGroupId=fr.lteconsulting \
  -DarchetypeArtifactId=angular2-gwt.archetype \
  -DarchetypeVersion=1.4

mvn clean install

java -jar target/YOUR_ARTIFACT_ID.jar</code></pre></div></div></section><section id="_développement_live_reload"><h2>Développement Live reload</h2><div class="listingblock"><div class="content"><pre class="highlight"><code># Partie serveur
mvn spring-boot:run

# Partie client
mvn gwt:run-codeserver</code></pre></div></div></section><section id="_production"><h2>Production</h2><div class="listingblock"><div class="content"><pre class="highlight"><code># produit un fichier .war
mvn clean install</code></pre></div></div></section></section>
<section><section id="_architecture_et_fonctionnement"><h2>Architecture et Fonctionnement</h2></section><section id="_" data-transition="fade" data-background="images/archi-survol.png" data-background-size="contain"></section><section id="__2" data-transition="fade" data-background="images/archi-compil.png" data-background-size="contain"></section><section id="__3" data-transition="fade" data-background="images/archi-runtime.png" data-background-size="contain"></section><section id="__4" data-transition="fade" data-background="images/archi-sdm.png" data-background-size="contain"></section><section id="__5" data-transition="fade" data-background="images/archi-survol.png" data-background-size="contain"></section><section id="__6" data-transition="fade" data-background="images/archi-compil-zoom.png" data-background-size="contain"></section><section id="__7" data-transition="fade" data-background="images/archi-runtime-zoom.png" data-background-size="contain"></section><section id="__8" data-transition="fade" data-background="images/archi-sdm-zoom.png" data-background-size="contain"></section></section>
<section><section id="_jsinterop"><h2>JsInterop</h2><div class="paragraph"><p>On fait parler Java et Javascript ensemble&#8230;&#8203;</p></div><div class="ulist"><ul><li><p>Java peut appeler Javascript</p></li><li><p>Javascript peut utiliser Java</p></li></ul></div></section><section id="_jsinterop_2"><h2>JsInterop</h2><div class="paragraph"><p>Pour utiliser du JS, on décrit le type en Java :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">@JsType( isNative = true )
public class XMLHttpRequest
{
  @JsMethod
  public native void open( String method, String url );

  @JsMethod
  public native void send( Object data );

  // ...
}</code></pre></div></div></section><section id="_jsinterop_3"><h2>JsInterop</h2><div class="paragraph"><p>Puis on l&#8217;utilise comme si de rien n&#8217;était&#8230;&#8203;</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">XMLHttpRequest request = new XMLHttpRequest();

request.open( "GET", "service.json" );
request.setOnreadystatechange( (event) -&gt; {
  ...
};

request.send( ... );</code></pre></div></div></section><section id="_jsinterop_4"><h2>JsInterop</h2><div class="paragraph"><p>Pour exporter une classe Java vers JS, on place les annotations&#8230;&#8203;</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">package fr.lteconsulting;

@JsType
public class Robot
{
  @JsProperty
  private boolean wifiOn;

  @JsConstructor
  public Robot( DataService dataService ) { ... }

  @JsMethod
  protected void avance() { ... }
}</code></pre></div></div></section><section id="_jsinterop_5"><h2>JsInterop</h2><div class="paragraph"><p>Puis en JS :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="javascript language-javascript">let robot = new fr.lteconsulting.Robot( dataService )

robot.wifiOn = true

robot.avance()</code></pre></div></div></section><section id="_jsinterop_6"><h2>JsInterop</h2><div class="paragraph"><p>Donc <strong>Java</strong> peut fournir des composants au runtime <strong>Angular</strong>.</p></div>
<div class="paragraph"><p>Et vice-versa.</p></div></section></section>
<section><section id="_métadonnées"><h2>Métadonnées</h2><div class="paragraph"><p>Angular a besoin de méta-données sur les composants (<em>DI, routing, inputs/ouputs, &#8230;&#8203;</em>)</p></div><div class="paragraph"><p>Angular utilise les <strong>décorateurs</strong> ES7/Typescript (ex <strong>@Component()</strong>).</p></div><div class="paragraph"><p>Cela permet au développeur d&#8217;écrire moins de <em>boilerplate</em>.</p></div></section><section id="_en_java"><h2>en Java ?</h2><div class="paragraph"><p>Les annotations peuvent jouer le rôle des décorateurs (ex <strong>@Component</strong>).</p></div>
<div class="paragraph"><p>On peut générer du code portant les informations de type pour le runtime Angular au moment de la compilation.</p></div>
<div class="ulist"><ul><li><p>on utilise la JSR-269 pour générer les RTTI,</p></li><li><p>on utilise l&#8217;api JS d&#8217;Angular pour fournir les RTTI.</p></li></ul></div></section></section>
<section id="_démo"><h2>Démo !</h2></section>
<section id="_cas_d_utilisation"><h2>Cas d&#8217;utilisation</h2><div class="ulist"><ul><li><p>Applications 100% Java (petite ou grosse),</p></li><li><p>Implémentation de services en Java (interfaçage typé avec un Web service implémenté en Java),</p></li><li><p>Intégration JS/Typescript/Java,</p></li><li><p>Avec JHipster&#8230;&#8203;</p></li></ul></div></section>
<section id="_problèmes_rencontrés"><h2>Problèmes rencontrés</h2><div class="ulist"><ul><li><p>Le code d&#8217;Angular utilise <code>instanceof</code>, obligé de le forker.</p></li><li><p>Les objets JSON provenants du serveur doivent être convertis&#8230;&#8203;</p></li></ul></div></section>
<section id="_roadmap"><h2>Roadmap</h2><aside class="notes"><div class="paragraph"><p>Zones : montrer que l&#8217;on sort de la zone avec les timers GWT (non monkey patched par zone.js) et avec les appels à WebSpeechAPI</p></div>
<div class="paragraph"><p>Montrer comment intégrer Java et JS : un Component écrit en Typescript avec un Component Java. Pourquoi pas aussi un Component Java avec des Widgets GWT. Le top serait de montrer un débug dans chrome avec une partie TS et une partie Java.</p></div></aside>
<div class="ulist"><ul><li><p>Routeur à mettre à jour,</p></li><li><p>Génération du Typescript definition language pour les composants écrits en Java,</p></li><li><p>Plus si affinité&#8230;&#8203;</p></li></ul></div></section>
<section id="_conclusion"><h2>Conclusion</h2><div class="ulist"><ul><li><p>Testé sur de petits projets, très agréable.</p></li><li><p>Rajeunit GWT ! (n&#8217;utilise que le coeur).</p></li><li><p>(IMHO) En profiter pour oublier certaines "<em>conventions</em>" java (getter/setter, nommage, &#8230;&#8203;).</p></li></ul></div>
<div class="paragraph"><p>Si vous êtes intéressé par le projet, n&#8217;hésitez pas à demander pour le mettre en place !</p></div></section>
<section id="_questions"><h2>Questions ?</h2></section>
<section id="_merci_a_bientôt"><h2>Merci ! A bientôt</h2><div class="paragraph"><p>Les slides sont disponibles ici :</p></div>
<div class="paragraph"><p><a href="http://www.lteconsulting.fr/angular2boot-talk/">www.lteconsulting.fr/angular2boot-talk/</a></p></div></section></div></div><script src="reveal.js/lib/js/head.min.js"></script><script src="reveal.js/js/reveal.js"></script><script>// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display controls in the bottom right corner
  controls: true,
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: false,
  // Push each slide change to the browser history
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  previewLinks: false,
  // Theme (e.g., beige, black, league, night, serif, simple, sky, solarized, white)
  // NOTE setting the theme in the config no longer works in reveal.js 3.x
  //theme: Reveal.getQueryHash().theme || 'moon',
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: Reveal.getQueryHash().transition || 'slide',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 960,
  height: 700,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
  ]
});</script></body></html>